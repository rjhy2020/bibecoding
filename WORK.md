WORK PLAN — 스피킹: 30초 타임아웃 + 50% 판정 + 효과

목표
- 사용자가 30초 안에 전체 문장을 완주하지 못하면, 현재 매칭률로 자동 판정한다.
- 매칭률 ≥ 50%: 성공으로 간주. < 50%: 실패로 간주. 이후 ‘다음’으로 진행 가능.
- 성공/실패에 따라 간단한 시각/햅틱 효과를 제공한다.

범위
- `lib/features/speaking/speaking_page.dart`만 수정(상태/타이머/UI/효과). 서비스/데이터 변경 없음.

설계/상태
- 상수: `kTimeoutSec = 30`, `kPassThreshold = 0.5`.
- 상태 추가:
  - `Timer? _timeoutTimer;` — 30초 만료 타이머(만료 시 판정)
  - `Timer? _countdownTimer; int _remainSec;` — UI 카운트다운(1초 주기)
  - `bool _timedOut = false;` — 타임아웃 발생 여부 표시(효과/버튼 상태 분기용)
  - `enum Judge { none, pass, fail }` or `Judge? _judge;`
- 시작/종료 타이밍:
  - STT 시작 시 타이머 시작(`_startTimeout()`): `_remainSec = kTimeoutSec` 세팅 후 1초 주기 카운트다운 + 30초 후 만료 콜백
  - STT 중지/자동 통과/카드 이동/완료 시 타이머 모두 해제(`_clearTimeouts()`)

판정 로직
- 만료 콜백 `_onTimeout()`에서 매칭률 = `_matchedCount / _tokens.length` 계산(0으로 나눔 보호).
- `ratio >= kPassThreshold` → `_judge = pass`로 세팅, 아니면 `fail`.
- STT가 켜져 있으면 먼저 정지 → 효과 표시 → ‘다음’ 버튼 활성(자동 이동하지 않음).
- 수동 조기 종료(버튼) 시 기존 로직 유지; 단, 타이머도 정리.

UI/효과
- 카운트다운: 컨트롤 바 위/오른쪽에 `남은시간 00:SS` 표시. 10초 이하일 때 색상 경고(주황/빨강).
- 효과:
  - 성공: 카드 외곽선/그라데이션을 600ms 동안 초록색으로 펄스, `HapticFeedback.mediumImpact()`.
  - 실패: 카드 살짝 좌우로 쉐이크(Transform 애니메이션, ~400ms), `HapticFeedback.heavyImpact()`.
  - 효과는 일회성, ‘다음’ 활성화 유지.
- 버튼:
  - 타임아웃 후에는 `_judge` 결과와 무관하게 ‘다음’ 버튼 활성.
  - 라벨은 그대로 ‘다음’(마지막 카드/라운드는 ‘완료’), 선택적으로 스낵바/아이콘 배지 넣기(예: 체크/엑스).

변경 사항
1) 상태/상수 추가: 타이머/잔여시간/판정 플래그 및 enum.
2) STT 토글 연동: 시작 시 `_startTimeout()`, 중지/자동통과/이동 시 `_clearTimeouts()`.
3) 만료 핸들러: `_onTimeout()` 구현 → 판정/효과/다음 버튼 활성.
4) UI: 남은 시간 텍스트 추가(컨트롤 바 근처). 카드 위젯에 성공/실패 오버레이/애니메이션 분기.
5) 안전성: `dispose()`와 카드 전환 시 타이머/애니메이션 정리.

수락 기준(DoD)
- STT 시작 후 30초 내 완주 못하면 자동 판정이 일어난다.
- 매칭률 50% 이상이면 ‘성공’ 효과(초록 펄스 + 햅틱), 미만이면 ‘실패’ 효과(쉐이크 + 햅틱).
- 자동 판정 이후 ‘다음’ 버튼이 활성화되며, 사용자가 눌러서 다음으로 진행한다(자동 이동 없음).
- 타임아웃이 발생해도 앱이 멈추지 않고, 다음 카드에서 타이머가 정상 재시작된다.

테스트
- 시나리오 1: 30초 내 완주 → 기존 로직 유지(타임아웃 미발생, 자동 판정 없음).
- 시나리오 2: 30초 경과, 매칭률 0.7 → 성공 효과 + ‘다음’ 활성.
- 시나리오 3: 30초 경과, 매칭률 0.3 → 실패 효과 + ‘다음’ 활성.
- 시나리오 4: 타임아웃 직전 STT 수동 종료 → 타임아웃 정리되고 이중 판정/효과가 발생하지 않음.

영향 파일
- `lib/features/speaking/speaking_page.dart`

상태
- Proposed — 승인 시 반영(소요 1.5~3시간, 리스크 중간: 타이머/애니메이션 동기화).
